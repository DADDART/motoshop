<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrello - MotoShop</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="index.html">MotoShop</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                Categorie
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="categoria.html?cat=caschi">Caschi</a></li>
                                <li><a class="dropdown-item" href="categoria.html?cat=abbigliamento">Abbigliamento</a></li>
                                <li><a class="dropdown-item" href="categoria.html?cat=accessori">Accessori moto</a></li>
                                <li><a class="dropdown-item" href="categoria.html?cat=ricambi">Ricambi</a></li>
                                <li><a class="dropdown-item" href="categoria.html?cat=manutenzione">Manutenzione</a></li>
                                <li><a class="dropdown-item" href="categoria.html?cat=outlet">Outlet</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="chi-siamo.html">Chi siamo</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="contatti.html">Contatti</a>
                        </li>
                    </ul>
                    <form class="d-flex me-2">
                        <input class="form-control me-2" type="search" placeholder="Cerca prodotti...">
                        <button class="btn btn-outline-light" type="submit">Cerca</button>
                    </form>
                    <div class="d-flex">
                        <a href="account.html" class="btn btn-outline-light me-2">
                            <i class="fas fa-user"></i>
                        </a>
                        <a href="wishlist.html" class="btn btn-outline-light me-2">
                            <i class="fas fa-heart"></i>
                        </a>
                        <a href="carrello.html" class="btn btn-outline-light position-relative">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                                3
                            </span>
                        </a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Breadcrumb -->
    <div class="container py-3">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Carrello</li>
            </ol>
        </nav>
    </div>

    <!-- Main Content -->
    <main class="py-4">
        <div class="container">
            <h1 class="h2 mb-4">Il tuo carrello</h1>

            <div class="row g-5">
                <!-- Prodotti nel carrello -->
                <div class="col-lg-8">
                    <div class="card shadow-sm">
                        <div class="card-body p-4">
                            <!-- Tabella Prodotti -->
                            <div class="table-responsive">
                                <table class="table align-middle">
                                    <thead>
                                        <tr>
                                            <th scope="col" width="50"></th>
                                            <th scope="col" width="100">Prodotto</th>
                                            <th scope="col">Descrizione</th>
                                            <th scope="col" class="text-center">Prezzo</th>
                                            <th scope="col" class="text-center">Quantità</th>
                                            <th scope="col" class="text-center">Totale</th>
                                            <th scope="col" class="text-center"></th>
                                        </tr>
                                    </thead>
                                    <tbody id="cart-items">
                                        <!-- Prodotto Esempio 1 -->
                                        <tr>
                                            <td>
                                                <button class="btn btn-sm text-danger remove-item" data-id="1">
                                                    <i class="fas fa-times"></i>
                                                </button>
                                            </td>
                                            <td>
                                                <img src="https://via.placeholder.com/80x80" alt="Casco Integrale Pro" class="img-thumbnail">
                                            </td>
                                            <td>
                                                <h6 class="fw-semibold mb-0">Casco Integrale Pro</h6>
                                                <small class="text-muted">Colore: Nero, Taglia: M</small>
                                            </td>
                                            <td class="text-center">€199,99</td>
                                            <td class="text-center">
                                                <div class="input-group input-group-sm" style="width: 100px;">
                                                    <button class="btn btn-outline-secondary decrease-qty" type="button" data-id="1">-</button>
                                                    <input type="text" class="form-control text-center item-qty" value="1" data-id="1">
                                                    <button class="btn btn-outline-secondary increase-qty" type="button" data-id="1">+</button>
                                                </div>
                                            </td>
                                            <td class="text-center fw-bold">€199,99</td>
                                            <td class="text-center">
                                                <button class="btn btn-sm btn-outline-secondary move-to-wishlist" data-id="1">
                                                    <i class="far fa-heart"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <!-- Prodotto Esempio 2 -->
                                        <tr>
                                            <td>
                                                <button class="btn btn-sm text-danger remove-item" data-id="2">
                                                    <i class="fas fa-times"></i>
                                                </button>
                                            </td>
                                            <td>
                                                <img src="https://via.placeholder.com/80x80" alt="Guanti Tecnici Pro" class="img-thumbnail">
                                            </td>
                                            <td>
                                                <h6 class="fw-semibold mb-0">Guanti Tecnici Pro</h6>
                                                <small class="text-muted">Colore: Nero/Rosso, Taglia: L</small>
                                            </td>
                                            <td class="text-center">€59,99</td>
                                            <td class="text-center">
                                                <div class="input-group input-group-sm" style="width: 100px;">
                                                    <button class="btn btn-outline-secondary decrease-qty" type="button" data-id="2">-</button>
                                                    <input type="text" class="form-control text-center item-qty" value="1" data-id="2">
                                                    <button class="btn btn-outline-secondary increase-qty" type="button" data-id="2">+</button>
                                                </div>
                                            </td>
                                            <td class="text-center fw-bold">€59,99</td>
                                            <td class="text-center">
                                                <button class="btn btn-sm btn-outline-secondary move-to-wishlist" data-id="2">
                                                    <i class="far fa-heart"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <!-- Prodotto Esempio 3 -->
                                        <tr>
                                            <td>
                                                <button class="btn btn-sm text-danger remove-item" data-id="3">
                                                    <i class="fas fa-times"></i>
                                                </button>
                                            </td>
                                            <td>
                                                <img src="https://via.placeholder.com/80x80" alt="Interfono Bluetooth Pro" class="img-thumbnail">
                                            </td>
                                            <td>
                                                <h6 class="fw-semibold mb-0">Interfono Bluetooth Pro</h6>
                                                <small class="text-muted">Comunicazione fino a 1 km</small>
                                            </td>
                                            <td class="text-center">€129,99</td>
                                            <td class="text-center">
                                                <div class="input-group input-group-sm" style="width: 100px;">
                                                    <button class="btn btn-outline-secondary decrease-qty" type="button" data-id="3">-</button>
                                                    <input type="text" class="form-control text-center item-qty" value="1" data-id="3">
                                                    <button class="btn btn-outline-secondary increase-qty" type="button" data-id="3">+</button>
                                                </div>
                                            </td>
                                            <td class="text-center fw-bold">€129,99</td>
                                            <td class="text-center">
                                                <button class="btn btn-sm btn-outline-secondary move-to-wishlist" data-id="3">
                                                    <i class="far fa-heart"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- Azioni Carrello -->
                            <div class="d-flex justify-content-between mt-4">
                                <button class="btn btn-outline-primary" onclick="window.location.href='index.html'">
                                    <i class="fas fa-arrow-left me-2"></i>Continua lo shopping
                                </button>
                                <button class="btn btn-outline-danger" id="clear-cart">
                                    <i class="fas fa-trash me-2"></i>Svuota carrello
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Prodotti Correlati -->
                    <div class="mt-5">
                        <h3 class="h4 mb-4">Potrebbe interessarti anche</h3>
                        <div class="row g-4">
                            <!-- Prodotto Correlato 1 -->
                            <div class="col-6 col-md-4">
                                <div class="card h-100 product-card">
                                    <div class="position-relative">
                                        <img src="https://via.placeholder.com/300x300" class="card-img-top" alt="Giacca in pelle Sport">
                                    </div>
                                    <div class="card-body d-flex flex-column">
                                        <h5 class="card-title">Giacca in pelle Sport</h5>
                                        <p class="card-text text-muted small">Protezione e stile per ogni stagione</p>
                                        <div class="d-flex justify-content-between align-items-center mt-auto">
                                            <span class="fw-bold">€249,99</span>
                                            <button class="btn btn-sm btn-outline-primary"><i class="fas fa-cart-plus"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Prodotto Correlato 2 -->
                            <div class="col-6 col-md-4">
                                <div class="card h-100 product-card">
                                    <div class="position-relative">
                                        <img src="https://via.placeholder.com/300x300" class="card-img-top" alt="Casco Modulare">
                                        <span class="badge bg-danger position-absolute top-0 end-0 m-2">-15%</span>
                                    </div>
                                    <div class="card-body d-flex flex-column">
                                        <h5 class="card-title">Casco Modulare Touring</h5>
                                        <p class="card-text text-muted small">Versatilità per ogni viaggio</p>
                                        <div class="d-flex justify-content-between align-items-center mt-auto">
                                            <span class="fw-bold">€179,99</span>
                                            <button class="btn btn-sm btn-outline-primary"><i class="fas fa-cart-plus"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Prodotto Correlato 3 -->
                            <div class="col-6 col-md-4">
                                <div class="card h-100 product-card">
                                    <div class="position-relative">
                                        <img src="https://via.placeholder.com/300x300" class="card-img-top" alt="Stivali da Moto">
                                    </div>
                                    <div class="card-body d-flex flex-column">
                                        <h5 class="card-title">Stivali da Moto Touring</h5>
                                        <p class="card-text text-muted small">Comfort e protezione per lunghi viaggi</p>
                                        <div class="d-flex justify-content-between align-items-center mt-auto">
                                            <span class="fw-bold">€149,99</span>
                                            <button class="btn btn-sm btn-outline-primary"><i class="fas fa-cart-plus"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Riepilogo Ordine -->
                <div class="col-lg-4">
                    <div class="card shadow-sm">
                        <div class="card-header bg-light py-3">
                            <h3 class="h5 mb-0">Riepilogo ordine</h3>
                        </div>
                        <div class="card-body p-4">
                            <div class="d-flex justify-content-between mb-3">
                                <span>Subtotale</span>
                                <span class="fw-bold" id="subtotal">€389,97</span>
                            </div>
                            <div class="d-flex justify-content-between mb-3">
                                <span>Spedizione</span>
                                <span class="fw-bold" id="shipping">€5,99</span>
                            </div>
                            <div class="d-flex justify-content-between mb-3 text-success">
                                <span>Sconto</span>
                                <span class="fw-bold" id="discount">-€0,00</span>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between mb-4">
                                <span class="fw-bold">Totale (IVA inclusa)</span>
                                <span class="fw-bold fs-5" id="total">€395,96</span>
                            </div>

                            <!-- Codice Sconto -->
                            <div class="mb-4">
                                <label for="coupon-code" class="form-label">Codice sconto</label>
                                <div class="input-group mb-3">
                                    <input type="text" class="form-control" id="coupon-code" placeholder="Inserisci codice">
                                    <button class="btn btn-outline-secondary" type="button" id="apply-coupon">Applica</button>
                                </div>
                            </div>

                            <!-- Spedizione -->
                            <div class="mb-4">
                                <label class="form-label">Metodo di spedizione</label>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="radio" name="shipping-method" id="standard-shipping" checked>
                                    <label class="form-check-label d-flex justify-content-between" for="standard-shipping">
                                        <span>Standard (3-5 giorni)</span>
                                        <span>€5,99</span>
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="radio" name="shipping-method" id="express-shipping">
                                    <label class="form-check-label d-flex justify-content-between" for="express-shipping">
                                        <span>Express (1-2 giorni)</span>
                                        <span>€9,99</span>
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="shipping-method" id="free-shipping">
                                    <label class="form-check-label d-flex justify-content-between" for="free-shipping">
                                        <span>Gratuita (ordini >€200)</span>
                                        <span>€0,00</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Pulsante Checkout -->
                            <a href="checkout.html" class="btn btn-primary w-100 py-3">
                                Procedi al checkout
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                    <h5>MotoShop</h5>
                    <p>Il tuo negozio online per accessori e abbigliamento moto di qualità.</p>
                    <div class="social-icons">
                        <a href="#" class="text-white me-2"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-white me-2"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-white me-2"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                    <h5>Informazioni</h5>
                    <ul class="list-unstyled">
                        <li><a href="chi-siamo.html" class="text-white">Chi siamo</a></li>
                        <li><a href="condizioni-vendita.html" class="text-white">Condizioni di vendita</a></li>
                        <li><a href="privacy.html" class="text-white">Privacy policy</a></li>
                        <li><a href="contatti.html" class="text-white">Contatti</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                    <h5>Assistenza</h5>
                    <ul class="list-unstyled">
                        <li><a href="faq.html" class="text-white">FAQ</a></li>
                        <li><a href="spedizioni.html" class="text-white">Spedizioni</a></li>
                        <li><a href="resi.html" class="text-white">Resi e rimborsi</a></li>
                        <li><a href="tracking.html" class="text-white">Tracking ordine</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h5>Contatti</h5>
                    <address>
                        <p><i class="fas fa-map-marker-alt me-2"></i> Via delle Moto, 123 - Milano</p>
                        <p><i class="fas fa-phone me-2"></i> +39 02 1234567</p>
                        <p><i class="fas fa-envelope me-2"></i> info@motoshop.it</p>
                    </address>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-md-6 text-center text-md-start">
                    <p class="mb-0">&copy; 2025 MotoShop. Tutti i diritti riservati.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <img src="https://via.placeholder.com/50x30" alt="Visa" class="payment-icon">
                    <img src="https://via.placeholder.com/50x30" alt="Mastercard" class="payment-icon">
                    <img src="https://via.placeholder.com/50x30" alt="PayPal" class="payment-icon">
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Gestione quantità
            const decreaseButtons = document.querySelectorAll('.decrease-qty');
            const increaseButtons = document.querySelectorAll('.increase-qty');
            const quantityInputs = document.querySelectorAll('.item-qty');
            const removeButtons = document.querySelectorAll('.remove-item');
            const clearCartButton = document.getElementById('clear-cart');
            const applyButton = document.getElementById('apply-coupon');

            // Aggiorna totali quando cambia la quantità
            function updateTotals() {
                let subtotal = 0;

                // Calcola subtotale dagli elementi nella tabella
                const rows = document.querySelectorAll('#cart-items tr');
                rows.forEach(row => {
                    const price = parseFloat(row.querySelector('td:nth-child(4)').textContent.replace('€', '').replace(',', '.'));
                    const quantity = parseInt(row.querySelector('.item-qty').value);
                    const total = price * quantity;
                    row.querySelector('td:nth-child(6)').textContent = '€' + total.toFixed(2).replace('.', ',');
                    subtotal += total;
                });

                // Aggiorna i valori nel riepilogo
                document.getElementById('subtotal').textContent = '€' + subtotal.toFixed(2).replace('.', ',');

                // Calcola spedizione in base al metodo selezionato
                let shipping = 5.99; // Standard
                if (document.getElementById('express-shipping').checked) {
                    shipping = 9.99;
                } else if (document.getElementById('free-shipping').checked || subtotal >= 200) {
                    shipping = 0;
                    document.getElementById('free-shipping').checked = true;
                }
                document.getElementById('shipping').textContent = '€' + shipping.toFixed(2).replace('.', ',');

                // Ottieni sconto
                const discount = parseFloat(document.getElementById('discount').textContent.replace('€', '').replace('-', '').replace(',', '.'));

                // Calcola totale
                const total = subtotal + shipping - discount;
                document.getElementById('total').textContent = '€' + total.toFixed(2).replace('.', ',');

                // Aggiorna contatore carrello nell'header
                let totalItems = 0;
                quantityInputs.forEach(input => {
                    totalItems += parseInt(input.value);
                });
                const cartCounter = document.querySelector('.fa-shopping-cart + .badge');
                if (cartCounter) {
                    cartCounter.textContent = totalItems;
                }
            }

            // Gestione pulsanti di diminuzione quantità
            decreaseButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const input = this.parentElement.querySelector('input');
                    let value = parseInt(input.value);
                    if (value > 1) {
                        input.value = value - 1;
                        updateTotals();
                    }
                });
            });

            // Gestione pulsanti di aumento quantità
            increaseButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const input = this.parentElement.querySelector('input');
                    input.value = parseInt(input.value) + 1;
                    updateTotals();
                });
            });

            // Gestione input quantità diretti
            quantityInputs.forEach(input => {
                input.addEventListener('change', function() {
                    let value = parseInt(this.value);
                    if (isNaN(value) || value < 1) {
                        this.value = 1;
                    }
                    updateTotals();
                });
            });

            // Gestione rimozione elementi
            removeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const row = this.closest('tr');
                    row.classList.add('fade-out');
                    setTimeout(() => {
                        row.remove();
                        // Se non ci sono più prodotti, mostra messaggio
                        if (document.querySelectorAll('#cart-items tr').length === 0) {
                            document.querySelector('.table').innerHTML = '<div class="text-center py-5"><p>Il tuo carrello è vuoto</p><a href="index.html" class="btn btn-primary mt-3">Inizia lo shopping</a></div>';
                        }
                        updateTotals();
                    }, 300);
                });
            });

            // Gestione svuota carrello
            if (clearCartButton) {
                clearCartButton.addEventListener('click', function() {
                    if (confirm('Sei sicuro di voler svuotare il carrello?')) {
                        const rows = document.querySelectorAll('#cart-items tr');
                        rows.forEach(row => row.remove());
                        document.querySelector('.table').innerHTML = '<div class="text-center py-5"><p>Il tuo carrello è vuoto</p><a href="index.html" class="btn btn-primary mt-3">Inizia lo shopping</a></div>';
                        updateTotals();
                    }
                });
            }

            // Gestione codice sconto
            if (applyButton) {
                applyButton.addEventListener('click', function() {
                    const couponInput = document.getElementById('coupon-code');
                    const couponCode = couponInput.value.trim();
                    if (couponCode === 'MOTO10') {
                        // Esempio di codice sconto valido
                        const subtotal = parseFloat(document.getElementById('subtotal').textContent.replace('€', '').replace(',', '.'));
                        const discount = subtotal * 0.1; // 10% di sconto
                        document.getElementById('discount').textContent = '-€' + discount.toFixed(2).replace('.', ',');
                        alert('Codice sconto applicato con successo!');
                        updateTotals();
                    } else if (couponCode) {
                        alert('Codice sconto non valido');
                    }
                });
            }

            // Gestione metodo spedizione
            document.querySelectorAll('input[name="shipping-method"]').forEach(radio => {
                radio.addEventListener('change', updateTotals);
            });

            // Inizializza totali al caricamento
            updateTotals();
        });
    </script>

    <style>
        /* Stili aggiuntivi per la pagina del carrello */
        .product-card .card-img-top {
            height: 150px;
            object-fit: cover;
        }

        .fade-out {
            opacity: 0;
            transition: opacity 0.3s;
        }
    </style>
</body>
</html>